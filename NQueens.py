
def solveNQueens( n: int) -> list[list[str]]:
    state= [["."] * n for _ in range(n)]
    res=[]

    visited_cols=set()

        
    visited_diagonals=set()

    visited_antidiagonals=set()
        
    def backtrack(r):
        if r==n:                
            res.append(["".join(row) for row in state])
            return
            
        for c in range(n):
            diff=r-c
            _sum=r+c
                
            if not (c in visited_cols or diff in visited_diagonals or _sum in visited_antidiagonals):                    
                visited_cols.add(c)
                visited_diagonals.add(diff)
                visited_antidiagonals.add(_sum)
                state[r][c]='Q' 
                backtrack(r+1) 

        
                visited_cols.remove(c)
                visited_diagonals.remove(diff)
                visited_antidiagonals.remove(_sum)
                state[r][c]='.'                                

    backtrack(0)
    return res

print(solveNQueens(4))
